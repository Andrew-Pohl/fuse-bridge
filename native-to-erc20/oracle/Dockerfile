FROM node:10

ENV NODE_ENV=production

ENV BRIDGE_MODE=NATIVE_TO_ERC

ENV ALLOW_HTTP=no

ENV HOME_POLLING_INTERVAL=5000
ENV FOREIGN_POLLING_INTERVAL=5000

ENV CONSENSUS_ADDRESS=0xEdb1505B953021366D39e02651A7A3Ae7F35b13e
ENV BLOCK_REWARD_ADDRESS=0xD14532e55B7D8C81E6b887334eED47464Eb6471c

ENV HOME_DEFAULT_GAS_PRICE=1000000000

ENV FOREIGN_GAS_PRICE_ORACLE_URL=https://ethgasstation.info/json/ethgasAPI.json
ENV FOREIGN_GAS_PRICE_SPEED_TYPE=fast
ENV FOREIGN_GAS_PRICE_FACTOR=0.1
ENV FOREIGN_GAS_PRICE_UPDATE_INTERVAL=600000
ENV FOREIGN_DEFAULT_GAS_PRICE=1000000000

ENV QUEUE_URL=amqp://rabbit
ENV REDIS_URL=redis://redis

ENV REDIS_LOCK_TTL=1000

ENV LOG_LEVEL=info
ENV MAX_PROCESSING_TIME=20000

WORKDIR /bridge-oracle

COPY . .
RUN npm install

CMD npm run $NPM_SCRIPT